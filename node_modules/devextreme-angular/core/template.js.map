{"version":3,"file":"template.js","sourceRoot":"","sources":["template.ts"],"names":[],"mappings":"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","sourcesContent":["/*!\n * devextreme-angular\n * Version: 19.2.3\n * Build date: Tue Oct 22 2019\n *\n * Copyright (c) 2012 - 2019 Developer Express Inc. ALL RIGHTS RESERVED\n *\n * This software may be modified and distributed under the terms\n * of the MIT license. See the LICENSE file in the root of the project for details.\n *\n * https://github.com/DevExpress/devextreme-angular\n */\n\n/* tslint:disable:use-input-property-decorator */\r\n\r\nimport {\r\n    Directive,\r\n    NgModule,\r\n    TemplateRef,\r\n    ViewContainerRef,\r\n    Input,\r\n    Renderer2,\r\n    NgZone,\r\n    EmbeddedViewRef\r\n} from '@angular/core';\r\n\r\nimport { DxTemplateHost } from './template-host';\r\nimport { getElement } from './utils';\r\nimport * as events from 'devextreme/events';\r\n\r\nexport const DX_TEMPLATE_WRAPPER_CLASS = 'dx-template-wrapper';\r\n\r\nexport class RenderData {\r\n    model: any;\r\n    index: number;\r\n    container: any;\r\n}\r\n\r\n@Directive({\r\n    selector: '[dxTemplate]'\r\n})\r\nexport class DxTemplateDirective {\r\n    @Input()\r\n    set dxTemplateOf(value) {\r\n        this.name = value;\r\n    };\r\n    name: string;\r\n\r\n    constructor(private templateRef: TemplateRef<any>,\r\n        private viewContainerRef: ViewContainerRef,\r\n        templateHost: DxTemplateHost,\r\n        private renderer: Renderer2,\r\n        private zone: NgZone) {\r\n        templateHost.setTemplate(this);\r\n    }\r\n\r\n    private renderTemplate(renderData: RenderData): EmbeddedViewRef<any> {\r\n        const childView = this.viewContainerRef.createEmbeddedView(this.templateRef, {\r\n            '$implicit': renderData.model,\r\n            index: renderData.index\r\n        });\r\n\r\n        const container = getElement(renderData.container);\r\n        if (renderData.container) {\r\n            childView.rootNodes.forEach((element) => {\r\n                this.renderer.appendChild(container, element);\r\n            });\r\n        }\r\n\r\n        return childView;\r\n    }\r\n\r\n    render(renderData: RenderData) {\r\n        let childView;\r\n        if (this.zone.isStable) {\r\n            childView = this.zone.run(() => {\r\n                return this.renderTemplate(renderData);\r\n            });\r\n        } else {\r\n            childView = this.renderTemplate(renderData);\r\n            // =========== WORKAROUND =============\r\n            // https://github.com/angular/angular/issues/12243\r\n            childView['detectChanges']();\r\n            // =========== /WORKAROUND =============\r\n        }\r\n\r\n        childView.rootNodes.forEach((element) => {\r\n            if (element.nodeType === 1) {\r\n                this.renderer.addClass(element, DX_TEMPLATE_WRAPPER_CLASS);\r\n            }\r\n\r\n            events.one(element, 'dxremove', ({}, params) => {\r\n                if (!params || !params._angularIntegration) {\r\n                    childView.destroy();\r\n                }\r\n            });\r\n        });\r\n\r\n        return childView.rootNodes;\r\n    }\r\n}\r\n\r\n@NgModule({\r\n    declarations: [DxTemplateDirective],\r\n    exports: [DxTemplateDirective]\r\n})\r\nexport class DxTemplateModule { }\r\n"]}