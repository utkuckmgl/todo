{"version":3,"file":"events-strategy.js","sourceRoot":"","sources":["events-strategy.ts"],"names":[],"mappings":"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","sourcesContent":["/*!\n * devextreme-angular\n * Version: 19.2.3\n * Build date: Tue Oct 22 2019\n *\n * Copyright (c) 2012 - 2019 Developer Express Inc. ALL RIGHTS RESERVED\n *\n * This software may be modified and distributed under the terms\n * of the MIT license. See the LICENSE file in the root of the project for details.\n *\n * https://github.com/DevExpress/devextreme-angular\n */\n\nimport { EventEmitter, NgZone } from '@angular/core';\r\nimport { DxComponent } from './component';\r\n\r\ninterface IEventSubscription {\r\n    handler: any;\r\n    unsubscribe: () => void;\r\n}\r\nexport class NgEventsStrategy {\r\n    private subscriptions: { [key: string]: IEventSubscription[] } = {};\r\n    private events: { [key: string]: EventEmitter<any> } = {};\r\n\r\n    constructor(private instance: any) { }\r\n\r\n    hasEvent(name: string) {\r\n        return this.getEmitter(name).observers.length !== 0;\r\n    }\r\n\r\n    fireEvent(name, args) {\r\n        let emitter = this.getEmitter(name);\r\n        if (emitter.observers.length) {\r\n            emitter.next(args && args[0]);\r\n        }\r\n    }\r\n\r\n    on(name, handler) {\r\n        let eventSubscriptions = this.subscriptions[name] || [],\r\n            subcription = this.getEmitter(name).subscribe(handler.bind(this.instance)),\r\n            unsubscribe = subcription.unsubscribe.bind(subcription);\r\n\r\n        eventSubscriptions.push({ handler, unsubscribe });\r\n        this.subscriptions[name] = eventSubscriptions;\r\n    }\r\n\r\n    off(name, handler) {\r\n        let eventSubscriptions = this.subscriptions[name] || [];\r\n\r\n        if (handler) {\r\n            eventSubscriptions.some((subscription, i) => {\r\n                if (subscription.handler === handler) {\r\n                    subscription.unsubscribe();\r\n                    eventSubscriptions.splice(i, 1);\r\n                    return true;\r\n                }\r\n            });\r\n        } else {\r\n            eventSubscriptions.forEach(subscription => {\r\n                subscription.unsubscribe();\r\n            });\r\n            eventSubscriptions.splice(0, eventSubscriptions.length);\r\n        }\r\n    }\r\n\r\n    dispose() {}\r\n\r\n    public addEmitter(eventName: string, emitter: EventEmitter<any>) {\r\n        this.events[eventName] = emitter;\r\n    }\r\n\r\n    private getEmitter(eventName: string): EventEmitter<any> {\r\n        if (!this.events[eventName]) {\r\n            this.events[eventName] = new EventEmitter();\r\n        }\r\n        return this.events[eventName];\r\n    }\r\n}\r\n\r\nexport class EmitterHelper {\r\n    lockedValueChangeEvent = false;\r\n\r\n    constructor(private zone: NgZone, private component: DxComponent) { }\r\n\r\n    fireNgEvent(eventName: string, eventArgs: any) {\r\n        if (this.lockedValueChangeEvent && eventName === 'valueChange') {\r\n            return;\r\n        }\r\n        let emitter = this.component[eventName];\r\n        if (emitter && emitter.observers.length) {\r\n            this.zone.run(() => {\r\n                emitter.next(eventArgs && eventArgs[0]);\r\n            });\r\n        }\r\n    }\r\n\r\n    createEmitters(events: any[]) {\r\n        events.forEach(event => {\r\n            this.component[event.emit] = new EventEmitter();\r\n        });\r\n    }\r\n}\r\n\r\n"]}